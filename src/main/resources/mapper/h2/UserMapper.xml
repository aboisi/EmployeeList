<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <!-- Mapperとxmlのマッピング -->
 <mapper namespace="com.example.demo.repository.UserMapper">
 
  	<!-- ユーザーの総件数を取得するSQL -->
  	<!-- 戻り値をintで返す -->
	 <select id="getUserCount" resultType="int">
	 	SELECT COUNT(*) FROM T_SYAIN
	 </select>
 
	 <!-- ユーザー登録 -->
	 <insert id="insertUser">
	 	INSERT INTO T_SYAIN (
	 		ID,
	 		NAME,
	 		PASSWORD,
	 		BIRTHDAY,
	 		GENDER,
	 		CREATEDATE
	 	)
	 	VALUES (
	 		#{userId},
	 		#{name},
	 		#{password},
	 		#{birthday},
	 		#{gender},
	 		CURRENT_TIMESTAMP
	 	)
	 </insert>
	 
	 <!--  ユーザー取得(ユーザーID指定) -->
	 <select id="selectUserByUserId"
	 		 parameterType="String"
	 		 resultType="com.example.demo.domain.user.model.MUser">
	 	SELECT
	 		 ID			AS	userId,
	 		 NAME		AS	name,
	 		 PASSWORD	AS	password,
	 		 GENDER		AS	gender,
	 		 BIRTHDAY	AS	birthday
	 	FROM
	 		T_SYAIN
	 	WHERE
	 		ID = #{userId}
	 </select>
	 
	 <!-- 社員一覧取得 -->
	 <select id="selectUserList"
	 		 resultType="com.example.demo.domain.user.model.MUser">
	 	SELECT
	 		ID			AS	userId,
	 		NAME		AS	name,
	 		PASSWORD	AS	password,
	 		GENDER		AS	gender,
	 		BIRTHDAY	AS	birthday
	 	FROM
	 		T_SYAIN
	 	<!-- WHEREは条件で絞る、ORDER BYは指定したもので並び替えて表示する -->
	 	ORDER BY
	 		ID
	 </select>
	 
	 <!-- ユーザー更新(1件) -->
	 <update id="updateOne">
	 	update
	 		T_SYAIN
	 	set
	 		NAME = #{name},
	 		PASSWORD = #{password},
	 		GENDER = #{gender},
	 		BIRTHDAY = #{birthday}
	 	where
	 		ID = #{userId}
	 </update>
</mapper>